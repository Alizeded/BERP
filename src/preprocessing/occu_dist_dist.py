import numpy as np
import sklearn.mixture as mixture


def occu_gmm(seed: int = 2036):
    # occupancy distance raw data from STRASS2023
    distance_strass = np.array(
        [
            126.88461538461539,
            163.07407407407408,
            180.26939655172413,
            176.4026622296173,
            170.0800821355236,
            110.58471454880295,
            187.45833333333334,
            148.37476459510358,
            250.54666666666665,
            141.72009029345372,
            176.73076923076923,
            161.800933125972,
            149.3564814814815,
            267.9097065462754,
            163.11012861736336,
            135.07676767676767,
            140.16803278688525,
            165.44970414201183,
            307.8636363636364,
            165.8631284916201,
            243.11764705882354,
            114.65552995391705,
            195.56617647058823,
            150.52315394242802,
            149.29517502365184,
            182.23121387283237,
            167.12391930835736,
            124.9261744966443,
            155.33668341708542,
            162.3903345724907,
            151.05719557195573,
            129.68191489361703,
            188.87154696132598,
            150.32018561484918,
            147.0152354570637,
            212.55339805825244,
            113.01290322580645,
            164.5485380116959,
            162.37008959338388,
            170.39716312056737,
            252.36989032901297,
            127.08689458689459,
            292.7353279631761,
            310.6,
            144.7409200968523,
            294.51724137931035,
            163.3575129533679,
            289.85,
            172.36630036630038,
            311.28205128205127,
            229.53571428571428,
            241.0,
            252.38086124401914,
            180.3846153846154,
            179.06545454545454,
            131.8653846153846,
            275.009324009324,
            156.67979669631512,
            167.18045112781954,
            144.22577209797657,
            172.3174061433447,
            311.85114503816794,
            294.1954022988506,
            151.8421052631579,
            264.9255172413793,
            166.43543543543544,
            207.29525483304042,
            158.751269035533,
            167.1747899159664,
            167.57557251908398,
            146.18775510204082,
            165.59240506329115,
            145.2424778761062,
            183.718,
            157.1582981985435,
            170.78556701030928,
            210.47916666666666,
            203.33242258652095,
            260.9622775800712,
            279.68445839874414,
            138.15981735159818,
            144.6366153846154,
            151.97577092511014,
            136.286800276434,
            205.8740740740741,
            133.94758339006125,
            149.68176538908247,
            137.52712591471106,
            140.46595744680852,
            181.94059405940595,
            88.75443786982248,
            290.9302469135802,
            150.42093023255813,
            164.88536585365853,
            131.30721649484536,
            151.7602568676418,
            178.50864779874215,
            186.6295652173913,
            168.82084690553745,
            154.45934379457918,
            183.4560810810811,
            184.64344262295083,
            148.764,
            225.60073839662448,
            123.51810237203496,
            213.9825581395349,
            202.78953421506614,
            167.8732484076433,
            155.71574468085106,
            208.66497461928935,
            129.40227136879855,
            205.4754966887417,
            177.42382271468145,
            221.76,
            215.1216931216931,
            201.87002518891688,
            233.03764705882352,
            167.36208991494533,
            165.32768978700165,
            183.17821782178217,
            151.19044459190445,
            188.5952818627451,
            151.2453680520781,
            116.08885298869144,
            231.51659192825113,
            195.30616822429906,
            186.2724770642202,
            142.63006535947713,
            207.0609022556391,
            134.71336405529954,
            244.63549783549783,
            181.44210526315788,
            207.9284,
            193.6090909090909,
            172.1620512820513,
            217.00052056220719,
            198.69493087557603,
            201.66092715231787,
            215.4906103286385,
            166.29718255499807,
            139.34766763848395,
            196.83645320197044,
            213.24848484848485,
            138.9558985667034,
            214.55249569707402,
            117.39111922141119,
            236.17371048252912,
            196.25514950166112,
            190.7258543833581,
            107.68409586056644,
            184.66492146596858,
            196.2943231441048,
            190.90052356020942,
            191.39607843137256,
            97.775,
            201.55347985347984,
            239.00904522613067,
        ]
    )

    # apply IQR to remove outliers
    # Q1 = np.percentile(distance_strass, 25)
    # Q3 = np.percentile(distance_strass, 75)

    # IQR = Q3 - Q1
    # distance_strass = distance_strass[
    #     (distance_strass > (Q1 - 1.5 * IQR)) & (distance_strass < (Q3 + 1.5 * IQR))
    # ]

    # fit a mixture of Gaussians to the occupancy distance data
    gmm = mixture.GaussianMixture(n_components=2, random_state=seed)
    gmm.fit(distance_strass.reshape(-1, 1))
    # sample from the fitted distribution to our data size with different upper and lower bounds [1, 6]
    return gmm
